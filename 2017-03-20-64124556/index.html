<!DOCTYPE html>
<html>
<head hexo-theme="https://volantis.js.org/#2.6.6">
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
    <title>[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】 - tabris的博客</title>
  
    <meta name="keywords" content="CSDN">
  
  
    <meta name="description" content="[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】
2017-03-20 13:37:14  Tabris_ 阅读数：296

博客爬取于2020-06-14 22:41:10以下为正文
版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。h...">
  

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="tabris的博客">
  

  <!-- import meta -->
  
    
      <meta name="theme-color" content="#FFFFFF">
    
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
  

  

  <!-- import link -->
  
  
  <link rel="shortcut icon" type="image/x-icon" sizes="16x16 32x32 48x48 64x64" href="/assets/favicon/favicon.ico">
  <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/favicon/favicon_180.png">
  <link rel="mask-icon" color="#1BC3FB" href="/assets/favicon/favicon_180.png">
  <link rel="manifest" href="/manifest.json">
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>
<header class="l_header shadow blur">
  <div class="container">
  <div class="wrapper">
    <div class="nav-sub">
      <p class="title"></p>
      <ul class="switcher nav-list-h">
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href="javascript:void(0)"></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href="javascript:void(0)"></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href="/">
          
          
            <i class="https://cdn.jsdelivr.net/gh/tabris233/cdn-assets/avatar/avatar.jpg"></i>
          
          
            Tabris
          
          
        </a>
      

			<div class="menu navigation">
				<ul class="nav-list-h">
          
          
          
            
            
              <li>
                <a class="flat-box" href="/" id="home">
                  <i class="fas fa-home fa-fw"></i>首页
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/categories/" id="categories">
                  <i class="fas fa-folder-open fa-fw"></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/tags/" id="tags">
                  <i class="fas fa-tags fa-fw"></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/archives/" id="archives">
                  <i class="fas fa-archive fa-fw"></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/friends/" id="friends">
                  <i class="fas fa-link fa-fw"></i>友链
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/about/" id="about">
                  <i class="fas fa-info-circle fa-fw"></i>关于
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box">
                  <i class="fas fa-book fa-fw"></i>待整理
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="flat-box" href="/categories/" id="categories">
                  <i class="fas fa-folder-open fa-fw"></i>分类
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/tags/" id="tags">
                  <i class="fas fa-tags fa-fw"></i>标签
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/archives/" id="archives">
                  <i class="fas fa-archive fa-fw"></i>归档
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/friends/" id="friends">
                  <i class="fas fa-link fa-fw"></i>友链
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/about/" id="about">
                  <i class="fas fa-info-circle fa-fw"></i>关于
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="搜索...">
        </form>
      </div>

			<ul class="switcher nav-list-h">
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href="javascript:void(0)"></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href="javascript:void(0)"></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="flat-box" href="/" id="home">
                  <i class="fas fa-home fa-fw"></i>首页
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/categories/" id="categories">
                  <i class="fas fa-folder-open fa-fw"></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/tags/" id="tags">
                  <i class="fas fa-tags fa-fw"></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/archives/" id="archives">
                  <i class="fas fa-archive fa-fw"></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/friends/" id="friends">
                  <i class="fas fa-link fa-fw"></i>友链
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/about/" id="about">
                  <i class="fas fa-info-circle fa-fw"></i>关于
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box">
                  <i class="fas fa-book fa-fw"></i>待整理
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="flat-box" href="/categories/" id="categories">
                  <i class="fas fa-folder-open fa-fw"></i>分类
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/tags/" id="tags">
                  <i class="fas fa-tags fa-fw"></i>标签
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/archives/" id="archives">
                  <i class="fas fa-archive fa-fw"></i>归档
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/friends/" id="friends">
                  <i class="fas fa-link fa-fw"></i>友链
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/about/" id="about">
                  <i class="fas fa-info-circle fa-fw"></i>关于
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

<script>setLoadingBarProgress(40);</script>



  <div class="l_body nocover">
    <div class="body-wrapper">
      

<div class="l_main">
  

  
    <article id="post" class="post white-box reveal shadow article-type-post" itemscope itemprop="blogPost">
      


  <section class="meta">
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h1 class="title">
    <a href="/2017-03-20-64124556/">
      [原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】
    </a>
  </h1>


        
        <div class="new-meta-box">
          
            
          
            
              
<div class="new-meta-item author">
  <a href rel="nofollow">
    <img src>
    <p></p>
  </a>
</div>

            
          
            
              
  
  <div class="new-meta-item category">
    <a href="/categories/csdn/%E6%95%B0%E5%AD%A6/%E6%80%9D%E7%BB%B4/%E5%90%84oj/" rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>CSDN/数学/思维/各OJ</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class="notlink">
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：2017年3月20日</p>
  </a>
</div>

            
          
            
              

            
          
            
              
  <div class="new-meta-item wordcount">
    <a class="notlink">
      <i class="fas fa-keyboard fa-fw" aria-hidden="true"></i>
      <p>字数：1.3k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class="notlink">
      <i class="fas fa-hourglass-half fa-fw" aria-hidden="true"></i>
      <p>时长：7分钟</p>
    </a>
  </div>


            
          
            
              
  <div class="new-meta-item browse valine">
    <a class="notlink">
      <i class="fas fa-eye fa-fw" aria-hidden="true"></i>
      
      <span id="/2017-03-20-64124556/" class="leancloud_visitors" data-flag-title="[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】">
      <p>
        <span class="leancloud-visitors-count"></span>
      </p>
      </span>
    </a>
  </div>


            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          
          <p>[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】</p>
<p>2017-03-20 13:37:14  <a href="https://me.csdn.net/qq_33184171" target="_blank" rel="external nofollow noopener noreferrer">Tabris_</a> 阅读数：296</p>
<hr>
<p>博客爬取于<code>2020-06-14 22:41:10</code><br><strong><em>以下为正文</em></strong></p>
<p>版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。<br><a href="https://blog.csdn.net/qq_33184171/article/details/64124556" target="_blank" rel="external nofollow noopener noreferrer">https://blog.csdn.net/qq_33184171/article/details/64124556</a></p>
<a id="more"></a>

<hr>
<p>题目链接:<a href="http://www.ifrog.cc/acm/problem/1109" target="_blank" rel="external nofollow noopener noreferrer">http://www.ifrog.cc/acm/problem/1109</a><br>————————————————————————————————————————————<br>1109 - Niro plays with snow<br>Time Limit：2s Memory Limit：128MByte</p>
<p>Submissions：50Solved：8</p>
<p>DESCRIPTION<br>Ah, it snows.</p>
<p>Niro picks up a snowflake. It grows every second. At every second, each of the smallest triangles splits and one of the two rotates by 180 degrees. The process is shown below. In the picture, blue represents the areas that are one layer thick, red two layers thick, yellow three layers thick, and green four layers thick.</p>
<p><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="http://www.ifrog.cc/uploads/2017/12d3.png" alt></p>
<p>Now let $F(n)$ be the number of smallest triangles that are one layers thick at order $n$, and $G(n)$ be the number of smallest triangles thar are three layers thick at order  $n$. For example, $F(1) = 1, G(1) = 0, F(2) = 6, G(2) = 0, F(3) = 30, G(3) = 6, F(4) = 138, G(4) = 78.$</p>
<p>Given $n$, can you tell Niro $F(n)$ and $G(n)$ modulo 1234321237?</p>
<p>INPUT<br>T+1 lines.<br>The first line contains one integer T, the number of test cases.<br>Each of the following T lines contains one integer n.</p>
<p>OUTPUT<br>T lines.<br>Each line contains two integers, $F(n) \mod 1234321237$ and $G(n) \mod 1234321237$ for each query.</p>
<p>SAMPLE INPUT<br>5<br>3<br>4<br>5<br>52<br>100</p>
<p>SAMPLE OUTPUT<br>30 6<br>138 78<br>606 654<br>540534048 39147304<br>978578590 88026038</p>
<p>HINT<br>$1≤T≤10^5$<br>$1≤n≤10^18$<br>————————————————————————————————————————————<br>题目大意：<br>就是问你 第n个图形中 一层 和三层的三角形有多少个</p>
<p>解题思路：</p>
<p>看了看数据范围，想到是个矩阵乘法，也推出了$8*8$的矩阵乘法<br>$ \left[\begin{array}{cc}\ 0&amp;&amp;6&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;0 \0&amp;&amp;3&amp;&amp;2&amp;&amp;0&amp;&amp;1&amp;&amp;0&amp;&amp;0&amp;&amp;0 \0&amp;&amp;1&amp;&amp;2&amp;&amp;1&amp;&amp;2&amp;&amp;0&amp;&amp;0&amp;&amp;0 \0&amp;&amp;0&amp;&amp;0&amp;&amp;3&amp;&amp;3&amp;&amp;0&amp;&amp;0&amp;&amp;0 \0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;6&amp;&amp;0&amp;&amp;0 \0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;3&amp;&amp;2&amp;&amp;0 \0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;1&amp;&amp;2&amp;&amp;1 \0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;0&amp;&amp;3 \\end{array}\right]\times \left[\begin{array}{cc} F_0(i)\F_1(i)\F_2(i)\F_3(i)\G_0(i)\G_1(i)\G_2(i)\G_3(i)\  \end{array}\right] =  \left[\begin{array}{cc} F_0(i+1)\F_1(i+1)\F_2(i+1)\F_3(i+1)\G_0(i+1)\G_1(i+1)\G_2(i+1)\G_3(i+1)  \end{array}\right]$</p>
<p>-其中$F_i()$表示三角形三边中有$i$条变邻近红色(两层)<br>-其中$G_i()$表示三角形三边中有$i$条变邻近红色(两层)</p>
<p>然而交上去就TLE了,,,,<br>复杂度$O(T\times \log_2^{3}(n))$  .....</p>
<p>然后听了<strong>Q</strong> 的说法 预处理出所有的A矩阵的$2^i$次幂 然后在计算的时候只要用向量乘上矩阵就好了 复杂度就变成了$O(T\times \log_2^{2}(n))$  然后就过了</p>
<p>然而当时听说还有用4*4的矩阵过得..<br>最后看了题解 ,真是玄妙无比啊..<a href="http://www.ifrog.cc/acm/solution/17" target="_blank" rel="external nofollow noopener noreferrer">有兴趣的戳一下题解的传送阵</a></p>
<p>附本题代码<br>————————————————————————————————————————————</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"># include &lt;bits/stdc++.h&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">typedef long long int <span class="symbol">LL</span>;</span><br><span class="line"></span><br><span class="line"># define abs(x) ((x)&gt;<span class="number">0</span>?(x):-(x))</span><br><span class="line"></span><br><span class="line">const int <span class="symbol">MOD</span> =  <span class="number">1234321237</span>;</span><br><span class="line">const int <span class="symbol">N</span>   =  <span class="number">1e5</span>+<span class="number">7</span> ;</span><br><span class="line">const int <span class="symbol">M</span>   =  <span class="number">8</span> ;</span><br><span class="line"><span class="comment">/********************************************/</span></span><br><span class="line"></span><br><span class="line">struct <span class="symbol">Matrix</span>&#123;</span><br><span class="line">    <span class="symbol">LL</span> m[<span class="symbol">M</span>][<span class="symbol">M</span>];</span><br><span class="line">    void clearO()&#123;</span><br><span class="line">        for(int i=<span class="number">0</span>; i&lt;<span class="symbol">M</span>; i++) //初始化矩阵</span><br><span class="line">            for(int j=<span class="number">0</span>; j&lt;<span class="symbol">M</span>; j++)</span><br><span class="line">                m[i][j]= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    void clearE()&#123;</span><br><span class="line">        for(int i=<span class="number">0</span>; i&lt;<span class="symbol">M</span>; i++) //初始化矩阵</span><br><span class="line">            for(int j=<span class="number">0</span>; j&lt;<span class="symbol">M</span>; j++)</span><br><span class="line">                m[i][j]= (i==j);</span><br><span class="line">    &#125;</span><br><span class="line">    void display()&#123;</span><br><span class="line">        for(int i=<span class="number">0</span>; i&lt;<span class="symbol">M</span>; i++)&#123;</span><br><span class="line">            for(int j=<span class="number">0</span>; j&lt;<span class="symbol">M</span>; j++)</span><br><span class="line">                printf(<span class="string">"%d "</span>,m[i][j]);</span><br><span class="line">            puts(<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        puts(<span class="string">"-----"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="symbol">Matrix</span> operator * (<span class="symbol">Matrix</span> &amp;a,<span class="symbol">Matrix</span> &amp;b)&#123;</span><br><span class="line">    <span class="symbol">Matrix</span> c;</span><br><span class="line">    c.clearO();</span><br><span class="line"></span><br><span class="line">    for(int k=<span class="number">0</span>; k&lt;<span class="symbol">M</span>; k++)</span><br><span class="line">        for(int i=<span class="number">0</span>; i&lt;<span class="symbol">M</span>; i++)&#123; //实现矩阵乘法</span><br><span class="line">            if(a.m[i][k] &lt;= <span class="number">0</span>)  continue;</span><br><span class="line">            for(int j=<span class="number">0</span>; j&lt;<span class="symbol">M</span>; j++)&#123;</span><br><span class="line">                if(b.m[k][j] &lt;= <span class="number">0</span>)    continue;</span><br><span class="line">                c.m[i][j]=(c.m[i][j]+a.m[i][k]*b.m[k][j]+<span class="symbol">MOD</span>)<span class="comment">%MOD;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    return c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="symbol">Matrix</span> operator ^ (<span class="symbol">Matrix</span> &amp;a,<span class="symbol">LL</span> b)&#123;</span><br><span class="line">    <span class="symbol">Matrix</span> c;</span><br><span class="line">    c.clearE();</span><br><span class="line">    while(b)&#123;</span><br><span class="line">        if(b&amp;<span class="number">1</span>) c= c * a ;</span><br><span class="line">        b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        a = a * a ;</span><br><span class="line">    &#125;</span><br><span class="line">    return c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="symbol">Matrix</span> a[<span class="number">100</span>];</span><br><span class="line">void init()&#123;</span><br><span class="line"></span><br><span class="line">    a[<span class="number">0</span>].m[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">6</span>;</span><br><span class="line">    a[<span class="number">0</span>].m[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">3</span>,a[<span class="number">0</span>].m[<span class="number">1</span>][<span class="number">2</span>]=<span class="number">2</span>,a[<span class="number">0</span>].m[<span class="number">1</span>][<span class="number">4</span>]=<span class="number">1</span>;</span><br><span class="line">    a[<span class="number">0</span>].m[<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>,a[<span class="number">0</span>].m[<span class="number">2</span>][<span class="number">2</span>]=<span class="number">2</span>,a[<span class="number">0</span>].m[<span class="number">2</span>][<span class="number">3</span>]=<span class="number">1</span>,a[<span class="number">0</span>].m[<span class="number">2</span>][<span class="number">4</span>]=<span class="number">2</span>;</span><br><span class="line">    a[<span class="number">0</span>].m[<span class="number">3</span>][<span class="number">1</span>]=<span class="number">0</span>,a[<span class="number">0</span>].m[<span class="number">3</span>][<span class="number">2</span>]=<span class="number">0</span>,a[<span class="number">0</span>].m[<span class="number">3</span>][<span class="number">3</span>]=<span class="number">3</span>,a[<span class="number">0</span>].m[<span class="number">3</span>][<span class="number">4</span>]=<span class="number">3</span>;</span><br><span class="line">    a[<span class="number">0</span>].m[<span class="number">4</span>][<span class="number">5</span>]=<span class="number">6</span>;</span><br><span class="line">    a[<span class="number">0</span>].m[<span class="number">5</span>][<span class="number">5</span>]=<span class="number">3</span>,a[<span class="number">0</span>].m[<span class="number">5</span>][<span class="number">6</span>]=<span class="number">2</span>;</span><br><span class="line">    a[<span class="number">0</span>].m[<span class="number">6</span>][<span class="number">5</span>]=<span class="number">1</span>,a[<span class="number">0</span>].m[<span class="number">6</span>][<span class="number">6</span>]=<span class="number">2</span>,a[<span class="number">0</span>].m[<span class="number">6</span>][<span class="number">7</span>]=<span class="number">1</span>;</span><br><span class="line">    a[<span class="number">0</span>].m[<span class="number">7</span>][<span class="number">5</span>]=<span class="number">0</span>,a[<span class="number">0</span>].m[<span class="number">7</span>][<span class="number">6</span>]=<span class="number">0</span>,a[<span class="number">0</span>].m[<span class="number">7</span>][<span class="number">7</span>]=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    for(int i=<span class="number">1</span>;(<span class="number">1</span>ll&lt;&lt;i)&lt;=<span class="number">1e18</span>;i++)    a[i]=a[i<span class="number">-1</span>]*a[i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    init();</span><br><span class="line"></span><br><span class="line">    int <span class="symbol">_</span>;</span><br><span class="line">    <span class="symbol">Matrix</span> b,c,d;</span><br><span class="line">    <span class="symbol">LL</span> n ;</span><br><span class="line"></span><br><span class="line">    scanf(<span class="string">"%d"</span>,&amp;<span class="symbol">_</span>);</span><br><span class="line">    for(int i=<span class="number">1</span>;i&lt;=<span class="symbol">_</span>;i++)&#123;</span><br><span class="line">        scanf(<span class="string">"%lld"</span>,&amp;n);n--;</span><br><span class="line"></span><br><span class="line">        b.clearO();</span><br><span class="line">        b.m[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">//        b.display();</span><br><span class="line"></span><br><span class="line">        for(int i=<span class="number">0</span>;(<span class="number">1</span>ll&lt;&lt;i)&lt;=n;i++)&#123;</span><br><span class="line">            if(n&amp;(<span class="number">1</span>ll&lt;&lt;i))&#123;</span><br><span class="line">                for(int j=<span class="number">0</span>;j&lt;<span class="symbol">M</span>;j++)&#123;</span><br><span class="line">                    for(int k=<span class="number">0</span>;k&lt;<span class="symbol">M</span>;k++)&#123;</span><br><span class="line">                        b.m[<span class="number">1</span>][j]=(b.m[<span class="number">1</span>][j]+b.m[<span class="number">0</span>][k]*a[i].m[k][j]+<span class="symbol">MOD</span>)<span class="comment">%MOD;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                for(int j=<span class="number">0</span>;j&lt;<span class="symbol">M</span>;j++)&#123;</span><br><span class="line">                    b.m[<span class="number">0</span>][j]=b.m[<span class="number">1</span>][j];</span><br><span class="line">                    b.m[<span class="number">1</span>][j]=<span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        printf(<span class="string">"%lld "</span> ,((b.m[<span class="number">0</span>][<span class="number">0</span>]+b.m[<span class="number">0</span>][<span class="number">1</span>])<span class="comment">%MOD+(b.m[0][2]+b.m[0][3])%MOD)%MOD);</span></span><br><span class="line">        printf(<span class="string">"%lld\n"</span>,((b.m[<span class="number">0</span>][<span class="number">4</span>]+b.m[<span class="number">0</span>][<span class="number">5</span>])<span class="comment">%MOD+(b.m[0][6]+b.m[0][7])%MOD)%MOD);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
            <div class="article_footer">
              
                
  
    
    

<section class="widget copyright  desktop mobile">
  <div class="content">
    
      <blockquote>
        
          
            <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

          
        
          
            <p>本文永久链接是：<a href="http://tabris.top/2017-03-20-64124556/">http://tabris.top/2017-03-20-64124556/</a></p>
          
        
      </blockquote>
    
  </div>
</section>

  

  
    
    

<section class="widget qrcode  desktop mobile">
  

  <div class="content article-entry">
    
      
        <div class="fancybox"><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/tabris233/cdn-assets/qrcode/wechat.jpg" height="64px"></div>
      
    
      
        <div class="fancybox"><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/tabris233/cdn-assets/qrcode/alipay.jpg" height="64px"></div>
      
    
  </div>
</section>

  


              
            </div>
          
        </div>
        
          


  <section class="meta" id="footer-meta">
    <div class="new-meta-box">
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-06-19T13:14:24+00:00">
  <a class="notlink">
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：2020年6月19日</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/csdn/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>CSDN</p></a></div>


        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title rel="external nofollow noopener noreferrer" href="http://connect.qq.com/widget/shareqq/index.html?url=http://tabris.top/2017-03-20-64124556/&title=[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】 - tabris的博客&summary=[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】
2017-03-20 13:37:14  Tabris_ 阅读数：296

博客爬取于2020-06-14 22:41:10以下为正文
版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。https://blog.csdn.net/qq_33184171/article/details/64124556" target="_blank">
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title rel="external nofollow noopener noreferrer" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://tabris.top/2017-03-20-64124556/&title=[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】 - tabris的博客&summary=[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】
2017-03-20 13:37:14  Tabris_ 阅读数：296

博客爬取于2020-06-14 22:41:10以下为正文
版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。https://blog.csdn.net/qq_33184171/article/details/64124556" target="_blank">
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title rel="external nofollow noopener noreferrer" href="http://service.weibo.com/share/share.php?url=http://tabris.top/2017-03-20-64124556/&title=[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】 - tabris的博客&summary=[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】
2017-03-20 13:37:14  Tabris_ 阅读数：296

博客爬取于2020-06-14 22:41:10以下为正文
版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。https://blog.csdn.net/qq_33184171/article/details/64124556" target="_blank">
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png">
          
        </a>
      
    
      
        
        <div class="hoverbox">
          <a><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/wechat.png"></a>
          <div class="target">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAAAAACi5bZQAAADCUlEQVR42u3aS1LDMBAFQN//0nAASHl+Bk3S2kEljtTevJqn68v6dV0IwIABAwYMmDUwV3Flv/9jAy+e8+pzd787dh4wYMCAAQMGzDqYcAC6+Xz0wNEDpgNa8zxgwIABAwYMmL0w0UCX3Vj34HeBceo8YMCAAQMGDJjPgckCVgdS3RcABgwYMGDAgAEzVXxFg9xUkQcGDBgwYMCAeX+YdEHVLMymg+QxTSQYMGDAgAED5s9gqsHq1L/L5wEDBgwYMGDArIHpru5Aqfr5aqC7PQ8YMGDAgAEDZg1MtACrQmQvAmULvKkXBAYMGDBgwIDZCxMtuLLBKxvMqsVbtRi8DXhgwIABAwYMmONhniq8sgOupy4sRQdaYMCAAQMGDJg9MNWgVy26pgu6qf2AAQMGDBgwYPbCRANatsCaCn7dgi/8fzBgwIABAwbMGphsUZYe/DQLu+qg67HCDQwYMGDAgAGzBiZ7gO6Gs9/LQt4GUTBgwIABAwbMWpjq4KkbCLsDqm7QBAMGDBgwYMDsg+kOlKobmro41C3cwIABAwYMGDDvA5O94FN9TnijxcFV9cWCAQMGDBgwYPbAPH2A7Ear+xi76AQGDBgwYMCAWQPT/aGpi0bVF1IGqE7wwIABAwYMGDDHwXQD33jxlXxR1d/98X8wYMCAAQMGzBqYqcFQdgPRF/NU4XYb8MCAAQMGDBgwx8M8tdEqdHig1CzYwIABAwYMGDCfAzMdxKKBK/ucLCAYMGDAgAEDZi9MdyA0Vbh1LyJFV7pwAwMGDBgwYMAcC9Nd3Y1NPb86ICsnXzBgwIABAwbMv8NcxdUtvrKF29QFp/agCgwYMGDAgAFzHEy3gJsabE0HRTBgwIABAwbM58B0C7jqc8qDpSLoy98DAwYMGDBgwHwMTDS4VWGrBWD0PI8FPDBgwIABAwbMGpjqgCgb9KKBLTugAgMGDBgwYMDsh+kWbtXB0zW0qgMvMGDAgAEDBsxemO4GugOq6vOr+wsXbmDAgAEDBgyYY2GsFwHPAgMGDBgwYE5d37spIgp5MteoAAAAAElFTkSuQmCC">
          </div>
        </div>
      
    
      
        <a class="-mob-share-telegram" title rel="external nofollow noopener noreferrer" href="https://t.me/share/url?url=http://tabris.top/2017-03-20-64124556/&text=[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】 - tabris的博客" target="_blank">
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/telegram.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
          <div class="prev-next">
            
              <a class="prev" href="/2017-03-21-64432631/">
                <p class="title"><i class="fas fa-chevron-left" aria-hidden="true"></i>[原创]ZOJ 3772 Calculate the Function  [线段树+矩阵乘法]【思维？】</p>
                <p class="content">[原创]ZOJ 3772 Calculate the Function  [线段树+矩阵乘法]【思维？】
2017-03-21 08:02:33  Tabris_ 阅读数：558

博客爬取于2...</p>
              </a>
            
            
              <a class="next" href="/2017-03-16-62418811/">
                <p class="title">[原创]Codeforces Round #404 (Div. 2)<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
                <p class="content">[原创]Codeforces Round #404 (Div. 2)
2017-03-16 11:12:44  Tabris_ 阅读数：354

博客爬取于2020-06-14 22:41:11...</p>
              </a>
            
          </div>
        
      </section>
    </article>
  

  
    <!-- 显示推荐文章和评论 -->



  <article class="post white-box reveal comments shadow">
    <section class="article typo">
      <p ct><i class="fas fa-comments"></i> 评论</p>
      
      
      
      
      
      
        <section id="comments">
          <div id="valine_container" class="valine_thread">
            <i class="fas fa-cog fa-spin fa-fw fa-2x"></i>
          </div>
        </section>
      
      
    </section>
  </article>


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->

  <script>
  // https://github.com/theme-next/hexo-theme-next/blob/master/layout/_third-party/math/mathjax.swig
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.0/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    // 文章章节标题不能为 “MathJax” ，否则会报错。
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>




  <script>
    window.subData = {
      title: '[原创]玲珑OJ  1109  Niro plays with snow   [递推+预处理矩阵乘法]【数学】',
      tools: true
    }
  </script>


</div>
<aside class="l_side">
  
  
    
    

<section class="widget blogger shadow desktop mobile">
  <div class="content">
    
      
        <a class="avatar flat-box" href="/about/">
          <img no-lazy src="https://cdn.jsdelivr.net/gh/tabris233/cdn-assets/avatar/avatar.jpg">
        </a>
      
    
    
      <div class="text">
        
          <h2>tabris's blog</h2>
        
        
          <p>Tabris</p>

        
        
          <p><span id="jinrishici-sentence">tabris的博客</span></p>
          <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
        
      </div>
    
    
      <div class="social-wrapper">
        
          
            <a href="/atom.xml" class="social fas fa-rss flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="mailto:tabris.dq@qq.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://github.com/tabris233" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://music.163.com/#/user/home?id=63035382" class="social fas fa-headphones-alt flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
            </a>
          
        
      </div>
    
  </div>
</section>

  

  
    
    



  


</aside>


  
  <footer class="clearfix">
    <br><br>
    
      
        <div class="aplayer-container">
          

  
    <meting-js theme="#1BCDFC" autoplay="false" volume="0.7" loop="all" order="list" fixed="false" list-max-height="340px" server="netease" type="playlist" id="3175833810" list-folded="true">
    </meting-js>
  


        </div>
      
    
      
        <br>
        <div class="social-wrapper">
          
            
              <a href="/atom.xml" class="social fas fa-rss flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="mailto:tabris.dq@qq.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://github.com/tabris233" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://music.163.com/#/user/home?id=63035382" class="social fas fa-headphones-alt flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              </a>
            
          
        </div>
      
    
      
        <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="external nofollow noopener noreferrer">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
      
    
      
        本站使用
        <a href="https://volantis.js.org/" target="_blank" class="codename" rel="external nofollow noopener noreferrer">Volantis</a>
        作为主题，总访问量为
          <span id="busuanzi_value_site_pv"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
          次
        
      
    
      
        <div class="copyright">
        <p><a href="http://tabris.top">Copyright © 2017-2020 tabris</a></p>

        </div>
      
    
  </footer>

<script>setLoadingBarProgress(80);</script>


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href="javascript:void(0)"></a>
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>


  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>


  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      ScrollReveal().reveal('.l_main .reveal', {
        distance: '8px',
        duration: '800',
        interval: '100',
        scale: '1'
      });
    });
  </script>


  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script defer src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>



  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('') {
          $('').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  



  
    
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>

  
    
<script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script>

  









  
    
<script src="https://cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js"></script>

  
  <script>
  var GUEST_INFO = ['nick','mail','link'];
  var meta = 'nick,mail,link'.split(',').filter(function(item){
    return GUEST_INFO.indexOf(item) > -1
  });
  var REQUIRED_FIELDS = ['nick','mail','link'];
  var requiredFields = 'nick,mail'.split(',').filter(function(item){
    return REQUIRED_FIELDS.indexOf(item) > -1
  });
  var valine = new Valine();
  function emoji(path, idx, ext) {
      return path + "/" + path + "-" + idx + "." + ext;
  }
  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }
  valine.init({
    el: '#valine_container',
    meta: meta,
    
    appId: "XkeYrd6r1FrJXgASPvPJa9Hp-gzGzoHsz",
    appKey: "de9Yfw8ns8xwf6S9eHOj82Wi",
    placeholder: "快来评论吧~",
    pageSize:'10',
    avatar:'robohash',
    lang:'zh-cn',
    visitor: 'true',
    highlight: 'true',
    mathJax: 'true',
    enableQQ: 'true',
    requiredFields: requiredFields,
    emojiCDN: 'https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/emoji/valine/',
    emojiMaps: emojiMaps
  })
  </script>





  
<script src="/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.6.5/js/search.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script>






<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-check-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-check-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-times-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-times-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>




<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  function pjax_fancybox() {
    $(".article-entry").find("img").not('.inline').not('a img').each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 标准 markdown 描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".article-entry").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  $(function () {
    pjax_fancybox();
  });
</script>




  <script>setLoadingBarProgress(100);</script>
<script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>
</html>
