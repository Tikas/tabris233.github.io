<!DOCTYPE html>
<html>
<head hexo-theme="https://volantis.js.org/#2.6.6">
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
    <title>[原创]POJ 2796 Feel Good 【单调栈】 - tabris的博客</title>
  
    <meta name="keywords" content="CSDN,poj,栈">
  
  
    <meta name="description" content="[原创]POJ 2796 Feel Good 【单调栈】
2017-01-07 01:11:20  Tabris_ 阅读数：412

博客爬取于2020-06-14 22:42:26以下为正文
版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。https://blog.csdn.net/qq_331...">
  

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="tabris的博客">
  

  <!-- import meta -->
  
    
      <meta name="theme-color" content="#FFFFFF">
    
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
  

  

  <!-- import link -->
  
  
  <link rel="shortcut icon" type="image/x-icon" sizes="16x16 32x32 48x48 64x64" href="/assets/favicon/favicon.ico">
  <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/favicon/favicon_180.png">
  <link rel="mask-icon" color="#1BC3FB" href="/assets/favicon/favicon_180.png">
  <link rel="manifest" href="/manifest.json">
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>
<header class="l_header shadow blur">
  <div class="container">
  <div class="wrapper">
    <div class="nav-sub">
      <p class="title"></p>
      <ul class="switcher nav-list-h">
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href="javascript:void(0)"></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href="javascript:void(0)"></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href="/">
          
          
            <i class="https://cdn.jsdelivr.net/gh/tabris233/cdn-assets/avatar/avatar.jpg"></i>
          
          
            Tabris
          
          
        </a>
      

			<div class="menu navigation">
				<ul class="nav-list-h">
          
          
          
            
            
              <li>
                <a class="flat-box" href="/" id="home">
                  <i class="fas fa-home fa-fw"></i>首页
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/categories/" id="categories">
                  <i class="fas fa-folder-open fa-fw"></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/tags/" id="tags">
                  <i class="fas fa-tags fa-fw"></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/archives/" id="archives">
                  <i class="fas fa-archive fa-fw"></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/friends/" id="friends">
                  <i class="fas fa-link fa-fw"></i>友链
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href="/about/" id="about">
                  <i class="fas fa-info-circle fa-fw"></i>关于
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box">
                  <i class="fas fa-book fa-fw"></i>待整理
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="flat-box" href="/categories/" id="categories">
                  <i class="fas fa-folder-open fa-fw"></i>分类
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/tags/" id="tags">
                  <i class="fas fa-tags fa-fw"></i>标签
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/archives/" id="archives">
                  <i class="fas fa-archive fa-fw"></i>归档
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/friends/" id="friends">
                  <i class="fas fa-link fa-fw"></i>友链
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/about/" id="about">
                  <i class="fas fa-info-circle fa-fw"></i>关于
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="搜索...">
        </form>
      </div>

			<ul class="switcher nav-list-h">
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href="javascript:void(0)"></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href="javascript:void(0)"></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="flat-box" href="/" id="home">
                  <i class="fas fa-home fa-fw"></i>首页
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/categories/" id="categories">
                  <i class="fas fa-folder-open fa-fw"></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/tags/" id="tags">
                  <i class="fas fa-tags fa-fw"></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/archives/" id="archives">
                  <i class="fas fa-archive fa-fw"></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/friends/" id="friends">
                  <i class="fas fa-link fa-fw"></i>友链
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href="/about/" id="about">
                  <i class="fas fa-info-circle fa-fw"></i>关于
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box">
                  <i class="fas fa-book fa-fw"></i>待整理
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="flat-box" href="/categories/" id="categories">
                  <i class="fas fa-folder-open fa-fw"></i>分类
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/tags/" id="tags">
                  <i class="fas fa-tags fa-fw"></i>标签
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/archives/" id="archives">
                  <i class="fas fa-archive fa-fw"></i>归档
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/friends/" id="friends">
                  <i class="fas fa-link fa-fw"></i>友链
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="flat-box" href="/about/" id="about">
                  <i class="fas fa-info-circle fa-fw"></i>关于
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

<script>setLoadingBarProgress(40);</script>



  <div class="l_body nocover">
    <div class="body-wrapper">
      

<div class="l_main">
  

  
    <article id="post" class="post white-box reveal shadow article-type-post" itemscope itemprop="blogPost">
      


  <section class="meta">
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h1 class="title">
    <a href="/2017-01-07-54150706/">
      [原创]POJ 2796 Feel Good 【单调栈】
    </a>
  </h1>


        
        <div class="new-meta-box">
          
            
          
            
              
<div class="new-meta-item author">
  <a href rel="nofollow">
    <img src>
    <p></p>
  </a>
</div>

            
          
            
              
  
  <div class="new-meta-item category">
    <a href="/categories/csdn/poj/%E6%9D%82%E7%B1%BB/" rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>CSDN/POJ/杂类</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class="notlink">
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：2017年1月7日</p>
  </a>
</div>

            
          
            
              

            
          
            
              
  <div class="new-meta-item wordcount">
    <a class="notlink">
      <i class="fas fa-keyboard fa-fw" aria-hidden="true"></i>
      <p>字数：1.2k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class="notlink">
      <i class="fas fa-hourglass-half fa-fw" aria-hidden="true"></i>
      <p>时长：6分钟</p>
    </a>
  </div>


            
          
            
              
  <div class="new-meta-item browse valine">
    <a class="notlink">
      <i class="fas fa-eye fa-fw" aria-hidden="true"></i>
      
      <span id="/2017-01-07-54150706/" class="leancloud_visitors" data-flag-title="[原创]POJ 2796 Feel Good 【单调栈】">
      <p>
        <span class="leancloud-visitors-count"></span>
      </p>
      </span>
    </a>
  </div>


            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          
          <p>[原创]POJ 2796 Feel Good 【单调栈】</p>
<p>2017-01-07 01:11:20  <a href="https://me.csdn.net/qq_33184171" target="_blank" rel="external nofollow noopener noreferrer">Tabris_</a> 阅读数：412</p>
<hr>
<p>博客爬取于<code>2020-06-14 22:42:26</code><br><strong><em>以下为正文</em></strong></p>
<p>版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。<br><a href="https://blog.csdn.net/qq_33184171/article/details/54150706" target="_blank" rel="external nofollow noopener noreferrer">https://blog.csdn.net/qq_33184171/article/details/54150706</a></p>
<a id="more"></a>

<hr>
<p>题目链接：<a href="http://poj.org/problem?id=2796" target="_blank" rel="external nofollow noopener noreferrer">http://poj.org/problem?id=2796</a></p>
<p>----------------------------------------------------------------------------------------------------.<br>Feel Good<br>Time Limit: 3000MS        Memory Limit: 65536K<br>Total Submissions: 13624        Accepted: 3807<br>Case Time Limit: 1000MS        Special Judge<br>Description</p>
<p>Bill is developing a new mathematical theory for human emotions. His recent investigations are dedicated to studying how good or bad days influent people&#39;s memories about some period of life. </p>
<p>A new idea Bill has recently developed assigns a non-negative integer value to each day of human life. </p>
<p>Bill calls this value the emotional value of the day. The greater the emotional value is, the better the daywas. Bill suggests that the value of some period of human life is proportional to the sum of the emotional values of the days in the given period, multiplied by the smallest emotional value of the day in it. This schema reflects that good on average period can be greatly spoiled by one very bad day. </p>
<p>Now Bill is planning to investigate his own life and find the period of his life that had the greatest value. Help him to do so.<br>Input</p>
<p>The first line of the input contains n - the number of days of Bill&#39;s life he is planning to investigate(1 &lt;= n &lt;= 100 000). The rest of the file contains n integer numbers a1, a2, ... an ranging from 0 to 106 - the emotional values of the days. Numbers are separated by spaces and/or line breaks.<br>Output</p>
<p>Print the greatest value of some period of Bill&#39;s life in the first line. And on the second line print two numbers l and r such that the period from l-th to r-th day of Bill&#39;s life(inclusive) has the greatest possible value. If there are multiple periods with the greatest possible value,then print any one of them.<br>Sample Input</p>
<p>6<br>3 1 6 4 5 2<br>Sample Output</p>
<p>60<br>3 5<br>Source</p>
<p>Northeastern Europe 2005<br>----------------------------------------------------------------------------------------------------.</p>
<p>题目大意：<br>给定一个序列，让你求[$\sum_i^ja_i *mina_{[i,j]}$]的最大值。</p>
<p>解题思路：<br>如果暴力求解的话很明显需要$O(n^2)$来解决,但是更明显的就是会<strong>超时</strong>.<br>于是换一种想法,由于我是找的单调栈类型题,所以,就没有想算法.......</p>
<p>至于单调栈怎么维护,其实很简单了,<br>于其类似的有单调队列,<br>单调,单调,所以栈中所有元素都是递增的,<br>那么我们在维护一个单调栈的时候要将所有的于即将进栈的元素不单调的元素出栈,这样下去就能维护一个单调栈了.<br>维护单调栈的好处也很明显,能够快速的维护一个区间内的最小值.<br>这样下来在进行统计的时候就能减少很多不必要的计算.</p>
<p>首先区间和用一个前缀和来表示,将求取区间和的部分降到$O(1)$,在每一次维护一个元素的时候,采用一个结构体,</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> val; <span class="comment">//元素的值</span></span><br><span class="line">    <span class="keyword">int</span> weizhi; <span class="comment">//元素在序列中的位置</span></span><br><span class="line">    <span class="keyword">int</span> l,r;  <span class="comment">//这个元素能控制的区间</span></span><br><span class="line">&#125; des[N];</span><br></pre></td></tr></table></figure>
<p>在每一次出栈操作的时候维护一下所需要计算的结果就行.</p>
<p><a href="http://www.cnblogs.com/ziyi--caolu/archive/2013/06/23/3151556.html" target="_blank" rel="external nofollow noopener noreferrer">这个题解介绍的非常详细了,自己写的是在太罗嗦还是删了吧...</a></p>
<p>并不是很难想,但是注意元素全部为0的时候,初始化ans需要&lt;0</p>
<p>附本题代码</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//#include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="comment"># include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment"># include &lt;string.h&gt;</span></span><br><span class="line"><span class="comment"># include &lt;iostream&gt;</span></span><br><span class="line"><span class="comment"># include &lt;vector&gt;</span></span><br><span class="line"><span class="comment"># include &lt;math.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="string">using</span> <span class="string">namespace</span> <span class="string">std;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># define INF        (~(1&lt;&lt;31))</span></span><br><span class="line"><span class="comment"># define INFLL      (~(1ll&lt;&lt;63))</span></span><br><span class="line"><span class="comment"># define pb         push_back</span></span><br><span class="line"><span class="comment"># define mp         make_pair</span></span><br><span class="line"><span class="comment"># define abs(a)     ((a)&gt;0?(a):-(a))</span></span><br><span class="line"><span class="comment"># define lalal      puts("*******");</span></span><br><span class="line"><span class="comment"># define s1(x)      scanf("%d",&amp;x)</span></span><br><span class="line"><span class="comment"># define Rep(a,b,c) for(int a=(b);a&lt;=(c);a++)</span></span><br><span class="line"><span class="comment"># define Per(a,b,c) for(int a=(b);a&gt;=(c);a--)</span></span><br><span class="line"><span class="comment"># define no         puts("NO")</span></span><br><span class="line"></span><br><span class="line"><span class="string">typedef</span> <span class="string">long</span> <span class="string">long</span> <span class="string">int</span> <span class="string">LL</span> <span class="string">;</span></span><br><span class="line"><span class="string">typedef</span> <span class="string">unsigned</span> <span class="string">long</span> <span class="string">long</span> <span class="string">int</span> <span class="string">uLL</span> <span class="string">;</span></span><br><span class="line"></span><br><span class="line"><span class="string">const</span> <span class="string">int</span> <span class="string">MOD</span> <span class="string">=</span> <span class="number">1e9</span><span class="string">+7;</span></span><br><span class="line"><span class="string">const</span> <span class="string">int</span> <span class="string">N</span> <span class="string">=</span> <span class="number">100000</span><span class="string">+5;</span></span><br><span class="line"><span class="string">const</span> <span class="string">double</span> <span class="string">eps</span> <span class="string">=</span> <span class="number">1e-6</span><span class="string">;</span></span><br><span class="line"><span class="string">const</span> <span class="string">double</span> <span class="string">PI</span> <span class="string">=</span> <span class="string">acos(-1.0);</span></span><br><span class="line"><span class="string">void</span> <span class="string">fre()</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line">    <span class="string">freopen("in.txt","r",stdin);</span></span><br><span class="line">    <span class="string">freopen("out.txt","w",stdout);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">/*************************************************/</span></span><br><span class="line"><span class="string">int</span> <span class="string">a[N];</span></span><br><span class="line"><span class="string">LL</span> <span class="string">sum[N];</span></span><br><span class="line"></span><br><span class="line"><span class="string">struct</span> <span class="string">node</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line">    <span class="string">int</span> <span class="string">val;</span></span><br><span class="line">    <span class="string">int</span> <span class="string">weizhi;</span></span><br><span class="line">    <span class="string">int</span> <span class="string">l,r;</span></span><br><span class="line"><span class="string">&#125;</span> <span class="string">des[N];</span></span><br><span class="line"><span class="string">int</span> <span class="string">ind;</span></span><br><span class="line"></span><br><span class="line"><span class="string">int</span> <span class="string">main()</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line">    <span class="string">int</span> <span class="string">n;</span></span><br><span class="line">    <span class="string">while(~s1(n))</span></span><br><span class="line">    <span class="string">&#123;</span></span><br><span class="line">        <span class="string">sum[0]=0;</span></span><br><span class="line">        <span class="string">Rep(i,1,n)</span> <span class="string">s1(a[i]),sum[i]=sum[i-1]+a[i];</span></span><br><span class="line"></span><br><span class="line">        <span class="string">ind</span> <span class="string">=</span> <span class="number">1</span><span class="string">;</span></span><br><span class="line">        <span class="string">int</span> <span class="string">l,r;</span></span><br><span class="line">        <span class="string">LL</span> <span class="string">ans</span> <span class="string">=</span> <span class="number">-1</span><span class="string">,tem</span> <span class="string">=</span> <span class="number">-1</span><span class="string">;</span></span><br><span class="line">        <span class="string">des[1].val</span> <span class="string">=</span> <span class="string">a[1];</span></span><br><span class="line">        <span class="string">des[1].weizhi</span> <span class="string">=</span> <span class="number">1</span><span class="string">;</span></span><br><span class="line">        <span class="string">des[1].l</span> <span class="string">=</span> <span class="number">1</span><span class="string">;</span></span><br><span class="line">        <span class="string">des[1].r</span> <span class="string">=</span> <span class="number">1</span><span class="string">;</span></span><br><span class="line"></span><br><span class="line">        <span class="string">Rep(i,2,n)</span></span><br><span class="line">        <span class="string">&#123;</span></span><br><span class="line">            <span class="string">while(ind</span> <span class="string">&amp;&amp;</span> <span class="string">a[i]&lt;=des[ind].val)</span></span><br><span class="line">            <span class="string">&#123;</span></span><br><span class="line">                <span class="string">des[ind].r</span> <span class="string">=</span> <span class="string">i-1;</span></span><br><span class="line"></span><br><span class="line">                <span class="string">tem</span> <span class="string">=</span> <span class="string">(sum[des[ind].r]-sum[des[ind].l-1])*des[ind].val;</span></span><br><span class="line">                <span class="string">if(tem</span> <span class="string">&gt;</span> <span class="string">ans)</span></span><br><span class="line">                <span class="string">&#123;</span></span><br><span class="line">                    <span class="string">ans</span> <span class="string">=</span> <span class="string">tem</span> <span class="string">;</span></span><br><span class="line">                    <span class="string">l</span> <span class="string">=</span> <span class="string">des[ind].l;</span></span><br><span class="line">                    <span class="string">r</span> <span class="string">=</span> <span class="string">des[ind].r;</span></span><br><span class="line">                <span class="string">&#125;</span></span><br><span class="line"></span><br><span class="line">                <span class="string">ind--;</span></span><br><span class="line">                <span class="string">if(!ind)</span> <span class="string">break;</span></span><br><span class="line"></span><br><span class="line">            <span class="string">&#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="string">des[++ind].val</span> <span class="string">=</span> <span class="string">a[i];</span></span><br><span class="line">            <span class="string">des[ind].weizhi</span> <span class="string">=</span> <span class="string">i;</span></span><br><span class="line">            <span class="string">des[ind].l</span> <span class="string">=</span> <span class="string">des[ind-1].weizhi+1;</span></span><br><span class="line">            <span class="string">des[ind].r</span> <span class="string">=</span> <span class="string">i;</span></span><br><span class="line">        <span class="string">&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="string">while(ind)</span></span><br><span class="line">        <span class="string">&#123;</span></span><br><span class="line">            <span class="string">des[ind].r</span> <span class="string">=</span> <span class="string">n;</span></span><br><span class="line"></span><br><span class="line">            <span class="string">tem</span> <span class="string">=</span> <span class="string">(sum[des[ind].r]-sum[des[ind].l-1])*des[ind].val;</span></span><br><span class="line">            <span class="string">if(tem</span> <span class="string">&gt;</span> <span class="string">ans)</span></span><br><span class="line">            <span class="string">&#123;</span></span><br><span class="line">                <span class="string">ans</span> <span class="string">=</span> <span class="string">tem</span> <span class="string">;</span></span><br><span class="line">                <span class="string">l</span> <span class="string">=</span> <span class="string">des[ind].l;</span></span><br><span class="line">                <span class="string">r</span> <span class="string">=</span> <span class="string">des[ind].r;</span></span><br><span class="line">            <span class="string">&#125;</span></span><br><span class="line">            <span class="string">ind--;</span></span><br><span class="line">        <span class="string">&#125;</span></span><br><span class="line">        <span class="string">printf("%lld\n%d</span> <span class="string">%d\n",ans,l,r);</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">    <span class="string">return</span> <span class="number">0</span><span class="string">;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">/**</span></span><br><span class="line"><span class="string">Posted</span> <span class="string">by</span> <span class="string">flywarrior</span> <span class="string">at</span> <span class="number">2012</span><span class="number">-11</span><span class="number">-01</span> <span class="number">20</span><span class="string">:09:53</span> <span class="string">on</span> <span class="string">Problem</span> <span class="number">2796</span></span><br><span class="line"><span class="string">input</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">102</span> <span class="number">58</span> <span class="number">149</span> <span class="number">52</span> <span class="number">66</span> <span class="number">52</span> <span class="number">105</span> <span class="number">28</span> <span class="number">161</span> <span class="number">111</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">97</span> <span class="number">111</span> <span class="number">154</span> <span class="number">93</span> <span class="number">72</span> <span class="number">109</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="string">答案：</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">2</span> <span class="number">2</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">1</span> <span class="number">9</span></span><br><span class="line"><span class="number">30368</span></span><br><span class="line"><span class="number">1</span> <span class="number">7</span></span><br><span class="line"><span class="number">45792</span></span><br><span class="line"><span class="number">1</span> <span class="number">6</span></span><br><span class="line"><span class="number">17</span></span><br><span class="line"><span class="number">1</span> <span class="number">16</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="string">*/</span></span><br></pre></td></tr></table></figure>

          
            <div class="article_footer">
              
                
  
    
    

<section class="widget copyright  desktop mobile">
  <div class="content">
    
      <blockquote>
        
          
            <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

          
        
          
            <p>本文永久链接是：<a href="http://tabris.top/2017-01-07-54150706/">http://tabris.top/2017-01-07-54150706/</a></p>
          
        
      </blockquote>
    
  </div>
</section>

  

  
    
    

<section class="widget qrcode  desktop mobile">
  

  <div class="content article-entry">
    
      
        <div class="fancybox"><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/tabris233/cdn-assets/qrcode/wechat.jpg" height="64px"></div>
      
    
      
        <div class="fancybox"><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/tabris233/cdn-assets/qrcode/alipay.jpg" height="64px"></div>
      
    
  </div>
</section>

  


              
            </div>
          
        </div>
        
          


  <section class="meta" id="footer-meta">
    <div class="new-meta-box">
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-06-19T13:14:24+00:00">
  <a class="notlink">
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：2020年6月19日</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/csdn/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>CSDN</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/poj/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>poj</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E6%A0%88/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>栈</p></a></div>


        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title rel="external nofollow noopener noreferrer" href="http://connect.qq.com/widget/shareqq/index.html?url=http://tabris.top/2017-01-07-54150706/&title=[原创]POJ 2796 Feel Good 【单调栈】 - tabris的博客&summary=[原创]POJ 2796 Feel Good 【单调栈】
2017-01-07 01:11:20  Tabris_ 阅读数：412

博客爬取于2020-06-14 22:42:26以下为正文
版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。https://blog.csdn.net/qq_33184171/article/details/54150706" target="_blank">
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title rel="external nofollow noopener noreferrer" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://tabris.top/2017-01-07-54150706/&title=[原创]POJ 2796 Feel Good 【单调栈】 - tabris的博客&summary=[原创]POJ 2796 Feel Good 【单调栈】
2017-01-07 01:11:20  Tabris_ 阅读数：412

博客爬取于2020-06-14 22:42:26以下为正文
版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。https://blog.csdn.net/qq_33184171/article/details/54150706" target="_blank">
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title rel="external nofollow noopener noreferrer" href="http://service.weibo.com/share/share.php?url=http://tabris.top/2017-01-07-54150706/&title=[原创]POJ 2796 Feel Good 【单调栈】 - tabris的博客&summary=[原创]POJ 2796 Feel Good 【单调栈】
2017-01-07 01:11:20  Tabris_ 阅读数：412

博客爬取于2020-06-14 22:42:26以下为正文
版权声明：本文为Tabris原创文章，未经博主允许不得私自转载。https://blog.csdn.net/qq_33184171/article/details/54150706" target="_blank">
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png">
          
        </a>
      
    
      
        
        <div class="hoverbox">
          <a><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/wechat.png"></a>
          <div class="target">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAAAAACi5bZQAAAC/0lEQVR42u3aQXICMQwEQP7/6eSehEIamQWF9hHWXrv3ohr59mX8OW4IwIABAwYMmDUwt3D8nP/rBcX599a599y99Y+dBwwYMGDAgAGzDqZcADVhTj3XhYnPAwYMGDBgwIBZC3NVQTeF7EJXzwMGDBgwYMCA+RyYaqB01XwwYMCAAQMGDJi0wEuDpG7hCAYMGDBgwIABM21QTQ9WDbrSwOtlnUgwYMCAAQMGzGUw3XE6SHp2MFU+DxgwYMCAAQNmDcx0VAOq6jrThtz4PGDAgAEDBgyYNTDdRll68BSk+v+xhiAYMGDAgAEDZg1MWkh1N9B9zymoaoAFBgwYMGDAgNkL093AqfnVA3ULze5zYMCAAQMGDJh9MN2Ddwum6YHSBlt8LjBgwIABAwbMGpj0BWlQlf7eDpzCQhUMGDBgwIABswemumDaKJs26NKRNv7AgAEDBgwYMPtg0gAo3Uja0EthyvPAgAEDBgwYMGtg0oW7oCn0tAHXvvgEBgwYMGDAgFkDkwZR3TENttL1wIABAwYMGDD/H2Ya9JyGPTW//QHAgAEDBgwYMGtg0mCoe+F4HCAduujcTvDAgAEDBgwYMG8Lkza20g12LyilF4viDwwGDBgwYMCAWQMz3dipBls1kEoDtfJ6YMCAAQMGDJg1MGlAlG7sVKNvGqTFnUgwYMCAAQMGzNvApIVR92BXFX7jQA0MGDBgwIABsw7mVAOtWqC9qtB7OA8MGDBgwIABswame8HnWReMThds1YIUDBgwYMCAAbMXZjq6kNWCMYXrNuDAgAEDBgwYMHthbuGoFmDTACq9IBQ3AMGAAQMGDBgw62DSBtmpgKlaGFbnxx8ODBgwYMCAAbMW5tnBUBcyDcDifYABAwYMGDBgPgZmWiCmhV36/ocFIBgwYMCAAQPm42CmG+wGX9PC8OlBFRgwYMCAAQPmcpi0QEsDomrA1A2qUigwYMCAAQMGzD6YaQNr2ng7HWBV9/OwwAMDBgwYMGDAvC2MAQYMGDBgwIBZNr4BX7/clTQvmbAAAAAASUVORK5CYII=">
          </div>
        </div>
      
    
      
        <a class="-mob-share-telegram" title rel="external nofollow noopener noreferrer" href="https://t.me/share/url?url=http://tabris.top/2017-01-07-54150706/&text=[原创]POJ 2796 Feel Good 【单调栈】 - tabris的博客" target="_blank">
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/telegram.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
          <div class="prev-next">
            
              <a class="prev" href="/2017-01-08-54234049/">
                <p class="title"><i class="fas fa-chevron-left" aria-hidden="true"></i>[原创]SPOJ MINSUN Largest Submatrix [二分+单调栈]</p>
                <p class="content">[原创]SPOJ MINSUN Largest Submatrix [二分+单调栈]
2017-01-08 15:18:59  Tabris_ 阅读数：268

博客爬取于2020-06-14 ...</p>
              </a>
            
            
              <a class="next" href="/2017-01-05-54098779/">
                <p class="title">[原创]SPOJ KAOS  [Trie]【字符串】<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
                <p class="content">[原创]SPOJ KAOS  [Trie]【字符串】
2017-01-05 22:17:18  Tabris_ 阅读数：399

博客爬取于2020-06-14 22:42:27以下为正文
版权...</p>
              </a>
            
          </div>
        
      </section>
    </article>
  

  
    <!-- 显示推荐文章和评论 -->



  <article class="post white-box reveal comments shadow">
    <section class="article typo">
      <p ct><i class="fas fa-comments"></i> 评论</p>
      
      
      
      
      
      
        <section id="comments">
          <div id="valine_container" class="valine_thread">
            <i class="fas fa-cog fa-spin fa-fw fa-2x"></i>
          </div>
        </section>
      
      
    </section>
  </article>


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->

  <script>
  // https://github.com/theme-next/hexo-theme-next/blob/master/layout/_third-party/math/mathjax.swig
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.0/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    // 文章章节标题不能为 “MathJax” ，否则会报错。
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>




  <script>
    window.subData = {
      title: '[原创]POJ 2796 Feel Good 【单调栈】',
      tools: true
    }
  </script>


</div>
<aside class="l_side">
  
  
    
    

<section class="widget blogger shadow desktop mobile">
  <div class="content">
    
      
        <a class="avatar flat-box" href="/about/">
          <img no-lazy src="https://cdn.jsdelivr.net/gh/tabris233/cdn-assets/avatar/avatar.jpg">
        </a>
      
    
    
      <div class="text">
        
          <h2>tabris's blog</h2>
        
        
          <p>Tabris</p>

        
        
          <p><span id="jinrishici-sentence">tabris的博客</span></p>
          <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
        
      </div>
    
    
      <div class="social-wrapper">
        
          
            <a href="/atom.xml" class="social fas fa-rss flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="mailto:tabris.dq@qq.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://github.com/tabris233" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://music.163.com/#/user/home?id=63035382" class="social fas fa-headphones-alt flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
            </a>
          
        
      </div>
    
  </div>
</section>

  

  
    
    



  


</aside>


  
  <footer class="clearfix">
    <br><br>
    
      
        <div class="aplayer-container">
          

  
    <meting-js theme="#1BCDFC" autoplay="false" volume="0.7" loop="all" order="list" fixed="false" list-max-height="340px" server="netease" type="playlist" id="3175833810" list-folded="true">
    </meting-js>
  


        </div>
      
    
      
        <br>
        <div class="social-wrapper">
          
            
              <a href="/atom.xml" class="social fas fa-rss flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="mailto:tabris.dq@qq.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://github.com/tabris233" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://music.163.com/#/user/home?id=63035382" class="social fas fa-headphones-alt flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              </a>
            
          
        </div>
      
    
      
        <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="external nofollow noopener noreferrer">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
      
    
      
        本站使用
        <a href="https://volantis.js.org/" target="_blank" class="codename" rel="external nofollow noopener noreferrer">Volantis</a>
        作为主题，总访问量为
          <span id="busuanzi_value_site_pv"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
          次
        
      
    
      
        <div class="copyright">
        <p><a href="http://tabris.top">Copyright © 2017-2020 tabris</a></p>

        </div>
      
    
  </footer>

<script>setLoadingBarProgress(80);</script>


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href="javascript:void(0)"></a>
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>


  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>


  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      ScrollReveal().reveal('.l_main .reveal', {
        distance: '8px',
        duration: '800',
        interval: '100',
        scale: '1'
      });
    });
  </script>


  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script defer src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>



  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('') {
          $('').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  



  
    
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>

  
    
<script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script>

  









  
    
<script src="https://cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js"></script>

  
  <script>
  var GUEST_INFO = ['nick','mail','link'];
  var meta = 'nick,mail,link'.split(',').filter(function(item){
    return GUEST_INFO.indexOf(item) > -1
  });
  var REQUIRED_FIELDS = ['nick','mail','link'];
  var requiredFields = 'nick,mail'.split(',').filter(function(item){
    return REQUIRED_FIELDS.indexOf(item) > -1
  });
  var valine = new Valine();
  function emoji(path, idx, ext) {
      return path + "/" + path + "-" + idx + "." + ext;
  }
  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }
  valine.init({
    el: '#valine_container',
    meta: meta,
    
    appId: "XkeYrd6r1FrJXgASPvPJa9Hp-gzGzoHsz",
    appKey: "de9Yfw8ns8xwf6S9eHOj82Wi",
    placeholder: "快来评论吧~",
    pageSize:'10',
    avatar:'robohash',
    lang:'zh-cn',
    visitor: 'true',
    highlight: 'true',
    mathJax: 'true',
    enableQQ: 'true',
    requiredFields: requiredFields,
    emojiCDN: 'https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/emoji/valine/',
    emojiMaps: emojiMaps
  })
  </script>





  
<script src="/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.6.5/js/search.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script>






<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-check-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-check-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-times-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-times-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>




<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  function pjax_fancybox() {
    $(".article-entry").find("img").not('.inline').not('a img').each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 标准 markdown 描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".article-entry").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  $(function () {
    pjax_fancybox();
  });
</script>




  <script>setLoadingBarProgress(100);</script>
<script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>
</html>
